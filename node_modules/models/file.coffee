events = require('events')
fs = require('fs')

class File extends events.EventEmitter

  rootPath: ''

  constructor: (@path, @file_type) ->
    @content = ''

  projectPath: ->
    @path.substr(File.rootPath.length)

  readContentsFromDisk: ->
    readPromise = new $.Deferred()
    fs.readFile(@path, 'utf8', (err, data) => 
      throw err if err
      @content = data
      @emit('reloaded')
    )
    readPromise

  writeContentsToDisk: ->
    writePromise = new $.Deferred()
    fs.writeFile(@path, @content, 'utf8', =>  writePromise.resolve())
    writePromise

module.exports.File = File