Haml = require('haml')

class EditorView extends Backbone.View

  className: 'editor'

  template: Haml """
    .filename= model.projectPath()
    .codeEditor=model.content
  """

  initialize: ->
    @model.on('reloaded', @_setFileContent)

  _setFileContent: =>
    @codeEditor.setValue(@model.content)

  render: ->
    @$el.html(@template(model:@model))
    console.log("'#{@model.projectPath()}' file type: '#{@model.file_type}'")
    @codeEditor = CodeMirror(@$el.find('.codeEditor')[0], 
      mode:  @model.file_type
    )

    @

exports.EditorView = EditorView
