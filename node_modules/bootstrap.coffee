FileList = require('file_list')
FileFinder = require('file_finder')
EditorPane = require('editor_pane_view')

setupShortcuts= (fileFinder) ->
  $(document).bind('keydown', 'ctrl+p', -> fileFinder.show())

exports.bootstrap = ->
  console.log("Starting in '#{process.cwd()}'")
  fileList = new FileList.FileList(process.cwd() + "/")
  fileList.startRead().done ->
    console.log("finished reading files")
  fileFinder = new FileFinder.FileFinder(model:fileList)
  $("body").append fileFinder.render().el
  setupShortcuts(fileFinder)

  editorPane = new EditorPane.EditorPaneView(el:$('#editorPane'))
  fileFinder.on('fileSelected', (file) -> editorPane.loadFile(file))
