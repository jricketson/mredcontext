file_list_lib = require('file_list')
file_finder_lib = require('file_finder')

setupShortcuts= (fileFinder) ->
  $(document).bind('keydown', 'ctrl+p', -> fileFinder.show())

exports.bootstrap = ->
  for i in [1..4]
    myCodeMirror = CodeMirror($("#editor#{i}")[0], 
      value: "function myScript(){return 100;}\n"
      mode:  "javascript"
    )
  fileList = new file_list_lib.FileList(process.cwd())
  fileList.startRead().always ->
    console.log(fileList)
  fileFinder = new file_finder_lib.FileFinder(model:fileList)
  $("body").append fileFinder.render().el
  setupShortcuts(fileFinder)
