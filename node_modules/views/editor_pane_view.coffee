editor = require('views/editor_view') 

class EditorPaneView extends Backbone.View

  initialize: ->
    @_editors = []

  loadFile: (file) ->
    @$el.append @_newEditor(file)
    file.readContentsFromDisk()

  _newEditor: (file) ->
    newEd = new editor.EditorView(model:file).render()
    newEd.on('moved resized', => @_updateLayout())
    @_editors.push newEd
    @_updateLayout()
    newEd.el

  _updateLayout: ->
    layout = (e.toJSON() for e in @_editors)
    @trigger('layoutUpdated', layout)

exports.EditorPaneView = EditorPaneView